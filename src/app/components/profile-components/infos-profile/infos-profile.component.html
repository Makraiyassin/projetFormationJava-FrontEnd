<div *ngIf="user" class="row">
  <div class="col-md-10 mb-3 mt-3">
    <div class="card">
      <div class="card-body">
        <div class="responsive-Display">
          <ul>
            <li><a routerLink="/profile/compte">
              mon compte
            </a></li>
            <li><a routerLink="/profile/borrows">
              mes emprunts
            </a></li>
            <li>
              <a *ngIf="user.omnitheque != null" routerLink="/omnitheque/{{user.omnitheque.id}}">mon omnitheque</a>
              <a *ngIf="user.omnitheque == null" routerLink="omnitheque/create">Créer mon omnitheque</a>
            </li>
          </ul>
        </div>
        <div class="d-flex flex-column align-items-center text-center">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSI-nYklUorHjNljDNAkeR3p3jiw8GnGHEwvw&usqp=CAU" alt="Admin" class="rounded-circle" width="150">
          <div class="mt-3">
            <h4>{{user.firstName}} {{user.lastName}} </h4>
            <button *ngIf="!editPasswordActive" class="btn btn-outline-primary margin-right-2">Supprimer mon compte</button>
            <button *ngIf="!editPasswordActive" class="btn btn-outline-primary" (click)="editPassword()">Modifier mon mot de passe</button>

            <div *ngIf="editPasswordActive" class="row" [formGroup]="editPasswordForm">
              <div class="mb-2">
                <input formControlName="password" type="password" class="form-control" id="password" placeholder="nouveau mot de pass">
                <input formControlName="confirmPassword" type="password" class="form-control" id="confirmPassword"  placeholder="confirmer mot de pass">
                <div *ngIf="editPasswordForm.controls.confirmPassword.getError('noMatch')" id="erreur_password" class="form-text text-danger">les mot de pass ne correspondent pas</div>
              </div>
              <div class="col-sm-6">
                <button class="btn btn-primary " (click)="cancelEditPassword()">Annuler</button>
              </div>
              <div class="col-sm-6">
                <button class="btn btn-primary " (click)="submitEditPassword()">valider</button>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <div  class="col-md-10"  [formGroup]="editForm">
    <div class="card mb-3">
      <div class="card-body">
        <div class="row">
          <div class="col-sm-3">
            <h6 class="mb-0">Email</h6>
          </div>

          <div *ngIf="!editActive" class="col-sm-9 text-secondary">
            {{user.email}}
          </div>
          <div *ngIf="editActive" class="col-sm-9 text-secondary">
            <input formControlName="email" type="email" class="form-control" id="email">
          </div>

        </div>
        <hr>
        <div class="row">
          <div class="col-sm-3">
            <h6 class="mb-0">Phone</h6>
          </div>

          <div *ngIf="!editActive" class="col-sm-9 text-secondary">
            {{user.phone}}
          </div>
          <div *ngIf="editActive" class="col-sm-9 text-secondary">
            <input formControlName="phone" type="text" class="form-control" id="phone">
          </div>

        </div>
        <hr>
        <div *ngIf="!editActive"  class="row">
          <div class="col-sm-3">
            <h6 class="mb-0">Address</h6>
          </div>

          <div class="col-sm-9 text-secondary">
            {{user.address.street}} n°{{user.address.number}},{{user.address.cp}} {{user.address.city}}
          </div>
        </div>
        <div *ngIf="editActive">
          <div id="address" class="row g-3" formGroupName="address">
            <div class="col-9">
              <label for="street" class="form-label">Addresse</label>
              <input formControlName="street" type="text" class="form-control" id="street" placeholder="rue">
            </div>
            <div class="col-3">
              <label for="number" class="form-label">  Numéro </label>
              <input formControlName="number" type="text" class="form-control" id="number" placeholder="n°">
            </div>

            <div class="col-md-6">
              <label for="city" class="form-label">Ville</label>
              <input formControlName="city" type="text" class="form-control" id="city">
            </div>
            <div class="col-md-2">
              <label for="cp" class="form-label">CP</label>
              <input  formControlName="cp" type="number" class="form-control" id="cp">
            </div>
            <div class="col-md-4">
              <label for="country" class="form-label">Pays</label>
              <select  formControlName="country" id="country" class="form-select">
                <option value="Belgique" selected> Belgique </option>
                <option value="France"> France </option>
              </select>
            </div>
          </div>
        </div>
        <hr>
        <div class="row">
          <div *ngIf="!editActive" class="col-sm-12">
            <button class="btn btn-primary " (click)="edit()">Editer</button>
          </div>
        </div>
        <div *ngIf="editActive" class="row">
          <div class="col-sm-6">
            <button class="btn btn-primary " (click)="cancelEdit()">Annuler</button>
          </div>
          <div class="col-sm-6">
            <button class="btn btn-primary " (click)="submitEdit()">valider</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
